# T16.6: Fix F77 â€” VM user-defined macro expansion

## Plan

Root cause: VM `def` opcode doesn't preserve `is_macro` flag from DefNode.
TreeWalk's `runDef` correctly calls `v.setMacro(true)`.

Fix approach: Add `def_macro` opcode (simpler than encoding flag in operand).

1. Add `.def_macro` to opcodes (bytecode.zig)
2. Compiler emits `.def_macro` when `node.is_macro == true`
3. VM handles `.def_macro` same as `.def` but also calls `v.setMacro(true)`

Also extend for is_dynamic and is_private to keep parity.

## Log

- Root cause: Compiler emitDef used .def for all defs, losing is_macro flag
- Added .def_macro opcode (0x43) to opcodes.zig
- Compiler emits .def_macro when node.is_macro == true
- VM handles .def_macro same as .def + v.setMacro(true)
- Updated chunk.zig disassembler, opcodes.zig test
- F77 fixed: (defmacro my-inc [x] (list '+ x 1)) + (my-inc 5) => 6
- Threading macros with user defmacro also work: (-> 5 my-inc) => 6
- All Zig tests pass, all Clojure test files pass on both backends
- D58 decision recorded
