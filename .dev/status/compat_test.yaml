# SCI Compatibility Test Tracking
# Source: test/upstream/sci/core_test.clj
# Generated: 2026-02-03 (T12.9)
#
# Status values:
#   pass   - all assertions pass
#   fail   - some assertions fail (non-crash)
#   skip   - test commented out (crash or missing feature)
#   pending - not yet ported
#
# Backend: TreeWalk only (--tree-walk)

sci_core_test:
  summary:
    total: 74           # total deftests (including skipped)
    active: 70          # running deftests
    pass: 70            # all assertions pass
    fail: 0             # assertion failures
    skip: 4             # commented out
    assertions: 248     # total is-assertions in active tests
    skipped_assertions: 15  # individual (is ...) commented within active tests

  tests:
    do-test:                    { status: pass }
    if-and-when-test:           { status: pass }
    and-or-test:                { status: pass }
    fn-literal-test:            { status: pass }
    fn-test:                    { status: pass }
    def-test:                   { status: pass }
    defn-test:                  { status: pass }
    let-test:                   { status: pass }
    destructure-test:           { status: pass, note: "2 assertions skipped: {:keys [:a]} keyword in keys vector" }
    closure-test:               { status: pass }
    core-hof-test:              { status: pass }
    literals-test:              { status: pass }
    quoting-test:               { status: pass }
    calling-ifns-test:          { status: pass, note: "1 assertion skipped: set-as-function" }
    arithmetic-test:            { status: pass }
    comparisons-test:           { status: pass }
    sequences-test:             { status: pass, note: "reduce without init workaround (uses init val 0)" }
    string-operations-test:     { status: pass, note: "minimal — clojure.string not implemented" }
    atoms-test:                 { status: pass }
    loop-recur-test:            { status: pass }
    for-test:                   { status: pass }
    cond-test:                  { status: pass }
    condp-test:                 { status: pass }
    case-test:                  { status: pass }
    comment-test:               { status: pass }
    declare-test:               { status: pass }
    defonce-test:               { status: pass }
    threading-test:             { status: pass }
    ifs-and-whens-test:         { status: pass }
    trampoline-test:            { status: pass }
    try-catch-test:             { status: pass }
    variable-can-shadow-test:   { status: pass, note: "1 assertion skipped: fn as param name shadows special" }
    delay-and-defn-private-test: { status: pass, note: "@(delay) deref not supported, uses force" }
    self-ref-test:              { status: skip, reason: "named fn self-reference returns different value" }
    regex-test:                 { status: pass }
    some-threading-test:        { status: pass, note: "uses str instead of clojure.string/lower-case" }
    macroexpand-test:           { status: pass }
    while-test:                 { status: pass }
    collections-test:           { status: pass }
    higher-order-fns-test:      { status: pass, note: "reduce without init workaround" }
    partition-group-test:       { status: pass }
    distinct-frequencies-test:  { status: pass }
    interleave-interpose-test:  { status: pass }
    function-combinators-test:  { status: pass }
    seq-slicing-test:           { status: pass }
    convenience-accessors-test: { status: pass }
    pred-fn-utils-test:         { status: pass }
    dotimes-test:               { status: pass }
    doseq-test:                 { status: pass }
    reduce-kv-test:             { status: pass }
    meta-test:                  { status: pass, note: "var :name metadata skipped; def moved outside deftest" }
    namespace-ops-test:         { status: pass }
    gensym-test:                { status: pass, note: "uses subs workaround (no clojure.string/starts-with?)" }
    eval-read-string-test:      { status: pass }
    macroexpand-detail-test:    { status: skip, reason: "list? crashes" }
    basic-predicates-test:      { status: pass, note: "int? skipped (not implemented)" }
    memoize-test:               { status: pass }
    format-test:                { status: pass }
    compare-and-set-test:       { status: pass }
    hash-identity-test:         { status: pass }
    collection-ops-test:        { status: pass }
    subvec-test:                { status: pass }
    collection-constructors-test: { status: pass }
    reduced-test:               { status: pass }
    lazy-seq-test:              { status: pass }
    ex-info-test:               { status: pass }
    multimethod-test:           { status: pass }
    type-predicates-test:       { status: pass, note: "int? skipped" }
    bitwise-test:               { status: pass }
    sort-test:                  { status: pass }
    merge-test:                 { status: pass }
    type-coercion-test:         { status: pass, note: "(into {} pairs) skipped" }

  # Missing features discovered during triage
  missing_features:
    tier1_zig_builtin:
      - "list? — crashes on call"
      - "int? — not implemented"
      - "reduce without init value — 2-arity reduce"
      - "set-as-function — #{:a :b} as callable"
      - "@(delay) — deref on delay object"
      - "(into {} [[:a 1]]) — into map from vector pairs"
    tier2_core_clj:
      - "clojure.string namespace (upper-case, lower-case, trim, includes?, split, join, starts-with?)"
      - "{:keys [:a]} — keyword in :keys destructuring vector"
    behavioral:
      - "named fn self-reference — (fn foo [] foo) returns different identity"
      - "fn as param name — shadows special form, crashes"
      - "var :name metadata — (meta #'x) :name not populated"
